async function wordcount(e,n,t){function g(e){return e.replace(/[|｜](.+?)《(.+?)》/g,"$1").replace(new RegExp("[｜|](.+?)《(.+?)》","g"),"$1").replace(new RegExp(`[｜|](.+?)((${p}+))`,"g"),"$1").replace(new RegExp(`(${c}+)（${p}+）`,"g"),"$1").replace(/[|｜]([《\(（])(.+?)([》\)）])/g,"$1$2$3").replace(/#(.+?)__(.+?)__#/g,"$1")}function r(){let e=0;for(let n of a){let t=new RegExp(`${n[0]}.*?${n[1]}`,"g");e+=(u.match(t)||[""]).join("").length}return e}function l(e){let n=new RegExp(`(?<=^|\r|\n|${$.join("|")}).+(\r|\n|${$.join("|")})`,"g"),t=e.match(n)||[],g=[];return t.length>0?(g=t.map(e=>e.replace(/[\r\n　 \t]/g,"").length),g.reduce((e,n)=>e+n,0)/t.length):0}let c="[々〇〻㐀-鿿豈-﫿\ud840-𯰀-\udfff]",p="[぀-ゟ゠-ヿ]",$=n||["。","！　","？　","‼　","⁉　","❕　","❗　","❔　","❓　","!　","\\?　"],a=t||[["「","」"],["『","』"],["（","）"]],o=g(e),u=o.replace(/[\r\n　 \t]/g,""),h=u.length,i=!!new RegExp(`${c}`).test(u),f=!0===i?u.match(new RegExp(`${c}`,"g")).join("").length:0;return{total:h,kanji:f,parenthesis:r(),letterLength:l(o)}}