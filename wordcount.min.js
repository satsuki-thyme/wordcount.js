async function wordcount(e,n,t){async function a(e){return e.replace(/[|｜](.+?)《(.+?)》/g,"$1").replace(new RegExp("[｜|](.+?)《(.+?)》","g"),"$1").replace(/[｜|](.+?)\((\p{scx=Hira}|\p{scx=Kana})\)/gu,"$1").replace(/(\p{scx=Han}+)（(\p{scx=Hira}|\p{scx=Kana})+）/gu,"$1").replace(/[|｜]([《\(（])(.+?)([》\)）])/g,"$1$2$3").replace(/#(.+?)__(.+?)__#/g,"$1")}async function c(){let e=0;for(let n of l){let t=new RegExp(`${n[0]}.*?${n[1]}`,"g");e+=(i.match(t)||[""]).join("").length}return e}async function r(e){let n=new RegExp(`(?<=^|\r|\n|${g.join("|")}).+(\r|\n|${g.join("|")})`,"g"),t=e.match(n)||[],a=[];return t.length>0?(a=t.map(e=>e.replace(/[\r\n　 \t]/g,"").length),a.reduce((e,n)=>e+n,0)/t.length):0}let g=n||["。","！　","？　","‼　","⁉　","❕　","❗　","❔　","❓　","!　","\\?　"],l=t||[["「","」"],["『","』"],["（","）"]],p=await a(e),i=p.replace(/[\r\n　 \t]/g,""),s=i.length,u=!!/\p{scx=Han}/u.test(i),o=!0===u?i.match(/\p{scx=Han}/gu).join("").length:0;return{total:s,kanji:o,parenthesis:await c(),letterLength:await r(p)}}