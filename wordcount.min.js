async function wordcount(e,n,t){async function a(e){return e.replace(/[|｜](.+?)《(.+?)》/g,"$1").replace(new RegExp("[｜|](.+?)《(.+?)》","g"),"$1").replace(new RegExp(`[｜|](.+?)((${l}+))`,"g"),"$1").replace(new RegExp(`(${c}+)（${l}+）`,"g"),"$1").replace(/[|｜]([《\(（])(.+?)([》\)）])/g,"$1$2$3").replace(/#(.+?)__(.+?)__#/g,"$1")}async function g(){let e=0;for(let n of $){let t=new RegExp(`${n[0]}.*?${n[1]}`,"g");e+=(o.match(t)||[""]).join("").length}return e}async function r(e){let n=new RegExp(`(?<=^|\r|\n|${p.join("|")}).+(\r|\n|${p.join("|")})`,"g"),t=e.match(n)||[],a=[];return t.length>0?(a=t.map(e=>e.replace(/[\r\n　 \t]/g,"").length),a.reduce((e,n)=>e+n,0)/t.length):0}let c="[々〇〻㐀-鿿豈-﫿\ud840-𯰀-\udfff]",l="[぀-ゟ゠-ヿ]",p=n||["。","！　","？　","‼　","⁉　","❕　","❗　","❔　","❓　","!　","\\?　"],$=t||[["「","」"],["『","』"],["（","）"]],i=await a(e),o=i.replace(/[\r\n　 \t]/g,""),u=o.length,h=!!new RegExp(`${c}`).test(o),w=!0===h?o.match(new RegExp(`${c}`,"g")).join("").length:0;return{total:u,kanji:w,parenthesis:await g(),letterLength:await r(i)}}