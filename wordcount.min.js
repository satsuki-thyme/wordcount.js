async function wordCount(F,u){async function e(F,u){return new Promise(e=>{function t(){for(let g=0;g<Object.keys(u).length-1;g++)r[c]!==Object.keys(u)[g]&&!1===l?c<F.length-1?(c++,t()):e(n):r[c]!==Object.keys(u)[g]&&!0===l&&r[c]!==D?(n++,c<F.length-1?(c++,t()):e(n)):r[c]!==Object.keys(u)[g]&&!0===l&&r[c]===D?(n++,l=!1,c<F.length-1?(c++,t()):e(n)):r[c]===Object.keys(u)[g]&&!1===l?(n++,l=!0,D=u[Object.keys(u)[g]],c<F.length-1?(c++,t()):e(n)):r[c]===Object.keys(u)[g]&&!0===l?(n++,c<F.length-1?(c++,t()):e(n)):(console.error("フールプルーフが働きました"),c<F.length-1?(c++,t()):e(n))}let n=0,c=0,l=!1,D="",r=F.split("");t()})}let t=void 0===u||""===u?{"「":"」","『":"』","（":"）"}:u,n=F.replace(/[\r\n　 ]/g,"").replace(/[|｜](.+?)《(.+?)》/g,"$1").replace(/([々〇〻\u3400-\u9FFF\uF900-\uFAFF\uD840-\uD87F\uDC00-\uDFFF]+)《(.+?)》/g,"$1").replace(/([々〇〻\u3400-\u9FFF\uF900-\uFAFF\uD840-\uD87F\uDC00-\uDFFF]+)\(([\u3040-\u309F\u30A0-\u30FF]+?)\)/g,"$1").replace(/([々〇〻\u3400-\u9FFF\uF900-\uFAFF\uD840-\uD87F\uDC00-\uDFFF]+)（([\u3040-\u309F\u30A0-\u30FF]+?)）/g,"$1").replace(/[|｜]([《\(（])(.+?)([》\)）])/g,"$1$2$3").replace(/#(.+?)__(.+?)__#/g,"$1"),c=n.length,l=!!/[々〇〻\u3400-\u9FFF\uF900-\uFAFF\uD840-\uD87F\uDC00-\uDFFF]/.test(n),D=!0===l?n.match(/[々〇〻\u3400-\u9FFF\uF900-\uFAFF\uD840-\uD87F\uDC00-\uDFFF]/g).join("").length:0;return e(n,t).then(async F=>[c,D,F])}